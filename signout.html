<!DOCTYPE html>
<html lang="en">

<!-- 
=================================
This is a computer sign-in/sign-out program for use at my school.
It is meant to replace an awkward and burdensome paper system.
The site is built using a bootstrap template.
=================================
-->

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="http://getbootstrap.com/favicon.ico">

    <title>Signin Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="Signin%20Template%20for%20Bootstrap_files/bootstrap.css" rel="stylesheet">
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="Signin%20Template%20for%20Bootstrap_files/ie10-viewport-bug-workaround.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="Signin%20Template%20for%20Bootstrap_files/signin.css" rel="stylesheet">
    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="Signin%20Template%20for%20Bootstrap_files/ie-emulation-modes-warning.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <!-- moment.js -->
    <script src="moment.js"></script>



    <style>
        /*This style affects the computer number in the checked-out-list on the right of the window.*/ 
        .btn-primary {
            height: 100px;
        }
    	.btn-success {
    	    height: 75px;
    	}
        em {
            font-size: 1em;
            font-style: normal;
            font-weight: bold;
            margin-right: 15px;
        }
        .list-group-container {
            padding-top: 35px;
        }
    </style>

</head>



<body>

    <div class="container">

        <div class="col-md-6 text-center">

            <form class="form-signin">

                <h2 class="form-signin-heading text-center">Check-In/Check-Out</h2>
        
                <div class="row form-group-row">
                    <div class="form-group col-md-8">
                        <label for="name">Who are you?</label>
                        <select class="form-control" id="name" size="16">
                            <option>Abraham (teacher)</option>
                            <option>Admon (teacher)</option>
                            <option>Admon, Michal</option>
                            <option>Anderson, Janet</option>
                            <option>Barr, Alexa</option>
                            <option>B'not Sherut</option>
                            <option>Camp, Katriel</option>
                            <option>Cohen, Rachel</option>
                            <option>Davis, Maya</option>
                            <option>Eydelman, Elana</option>
                            <option>Freud (teacher)</option>
                            <option>Friedman, Elisheva</option>
                            <option>Finder (teacher)</option>
                            <option>Friedman, Shira Rivka</option>
                            <option>Garwood (teacher)</option>
                            <option>Goodman, Sarah</option>
                            <option>Goldberg, Leora</option>
                            <option>Goodfriend, Shoshana</option>
                            <option>Grossberg (teacher)</option>
                            <option>Grossberg, Esther</option>
                            <option>Grossberg, Rivky</option>
                            <option>Hertzberg, Sarah</option>
                            <option>Hodaya (teacher)</option>
                            <option>Itskowitz (teacher)</option>
                            <option>Itskowitz, Aviva</option>
                            <option>Itskowitz, Shira</option>
                            <option>Joshowitz, Leah</option>
                            <option>Kaminsky, Chana</option>
                            <option>Kingman (teacher)</option>
                            <option>Kraut, Dalya</option>
                            <option>Langer (teacher)</option>
                            <option>Langer, Nechama</option>
                            <option>Leibovich, Amital</option>
                            <option>Leibovich, Naomi</option>
                            <option>Levari (teacher)</option>
                            <option>Levari, Shoshana</option>
                            <option>Luzer, Rachel</option>
                            <option>Mandelbaum, Batya</option>
                            <option>Mandelbaum, Rivka</option>
                            <option>McDougall (teacher)</option>
                            <option>Mia (teacher)</option>
                            <option>Milch (teacher)</option>
                            <option>Milch, Devorah</option>
                            <option>Myers (teacher)</option>
                            <option>Rodkin, Bluma</option>
                            <option>Rodkin, Nechama</option>
                            <option>Rosenfeld (teacher)</option>
                            <option>Russell, Chava</option>
                            <option>Saxon, Rivky</option>
                            <option>Segal, Avital</option>
                            <option>Sutofsky (teacher)</option>
                            <option>Sutofsky, Chaya</option>
                            <option>Sutofsky, Shira</option>
                            <option>Tal (teacher)</option>
                            <option>VanSickle, Eliyanah</option>
                            <option>Weinberg (teacher)</option>
                            <option>Wiesenfeld, Shira</option>
                            <option>Wimer (teacher)</option>
                            <option>Yolkut (teacher)</option>
                            <option>Yolkut, Chana</option>
                            <option>Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group col-md-4">
                        <label for="computer">Computer?</label>
                        <select class="form-control" id="computer" size="16">
                            <option value="1">1</option>
                            <option value="2">2a</option>
                            <option value="2.5">2b</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10a</option>
		              	    <option value="10.5">10b</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                        </select>
                    </div>
                </div>

                <button id="checkout" class="btn btn-lg btn-block btn-primary" type="button">Check Out</button>
                
            </form>
        </div>

        <div class="col-md-6 text-left list-group-container">
            <h5>Currently Checked Out Computers:</h5>
            <div id="checked-out-list" class="list-group">
            </div>
            <button id="checkin" class="btn btn-lg btn-success btn-block" type="button">Check In</button>
        </div>
    </div> <!-- /container -->

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="Signin%20Template%20for%20Bootstrap_files/ie10-viewport-bug-workaround.js"></script>
    
    <script>

/*
======================================
The Javascript uses JQuery to create click handlers for the buttons 
and the list group.
======================================
*/

        $(document).ready(function() {

            //When you click the "check out" button
            $("#checkout").click(function() {
                //If there is a name AND a computer selected from the selection boxes
                if ($("#name option:selected").text() && $("#computer option:selected").text()) {
                    //store the entries from those slection boxes
                    var name = $("#name option:selected").text();
                    var computer = $("#computer option:selected").text();
                    //store the current (checkout) time in a nice format with moment.js
                    var currentTime = moment().format('dddd') + ", " + moment().format('MMMM Do YYYY, h:mm a');
                    //create and store a new list-group-item for the right side list.
                    //this list-group-item gets an id (like 'c8') 
                    //this list-group item contains the computer number, the user's name, and the time.
                    var newCheckout = $('<a id="c' + computer + '" class="list-group-item list-group-item-action list-group-item-success"><em>' + computer + '</em>' + name + ' - ' + currentTime + '</a>');
                    //append the list-group-item created above to the end of the list with effects.
                    $(newCheckout).hide().appendTo("#checked-out-list").slideDown(400);
                    //remove the checked-out computer from the selection box
                    $("#computer option:selected").remove();

                //If the user didn't choose a name or a computer...
                } else {
                    //remind them to do it.
                    alert('pick a name and computer...');
                };
            });


            $(document).on("click", ".list-group-item", function () {
                $(".list-group-item").removeClass("active");
                $(this).addClass("active");
            });


            //When you click the "check in" button
            $("#checkin").click(function() {
                //look for the active element in the list-group
                var itemForCheckin = document.getElementsByClassName("list-group-item", "active");
                //if one exists, then
                if (itemForCheckin.length !== 0) {
                    //get its id
                    var computer = $(".active").attr("id");
                    //strip the leading "c" character from the id
                    var computer = computer.slice(1);
                    //slideUp the list-group-item
                    $(".active").slideUp(400, function () {
                        //remove it when the slide effect is finished
                        $(".active").remove();
                    });
                    //handle the special cases where the value doesn't mactch the text of the option (2a, 2b)
                    switch (computer) {
                        case "2a":
                            var op = '<option value="2.0">' + computer + '</option>';
                            break;
                        case "2b":
                            var op = '<option value="2.5">' + computer + '</option>';
                            break;
			case "10a":
                            var op = '<option value="10.0">' + computer + '</option>';
                            break;
                        case "10b":
                            var op = '<option value="10.5">' + computer + '</option>';
                            break;
                        default:
                            var op = '<option value="' + computer + '">' + computer + '</option>';       
                    };
                    //insert the computer number back into the selection box list
                    $("#computer").append(op);
                    //put the selection box options in the right order
                    sortSelect(document.getElementById("computer"));
                } else {
                    alert("Please select a computer to check-in");
                }
            });

            function sortSelect(selElem) {
                var tmpAry = new Array();
                
                for (var i=0;i<selElem.options.length;i++) {
                    tmpAry[i] = new Array();
                    tmpAry[i][0] = selElem.options[i].text;
                    tmpAry[i][1] = selElem.options[i].value;
                }
                tmpAry.sort(function(a, b) {
                    return a[1] - b[1];
                });
                while (selElem.options.length > 0) {
                    selElem.options[0] = null;
                }
                for (var i=0;i<tmpAry.length;i++) {
                    var op = new Option(tmpAry[i][0], tmpAry[i][1]);
                    selElem.options[i] = op;
                }
                return;
            };

        });

    </script>


</body>
</html>
